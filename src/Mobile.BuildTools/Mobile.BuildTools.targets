<?xml version="1.0" encoding="utf-8" ?>
<Project>

  <UsingTask TaskName="Mobile.BuildTools.Tasks.LocateBuildToolsConfigTask"
             AssemblyFile="$(_MobileBuildToolsParentBuildTasksDll)"/>

  <Import Project="AndroidManifest.targets"
          Condition="$(TargetFrameworkIdentifier) == 'MonoAndroid'" />
  <Import Project="MonoAndroid.targets"
          Condition="$(TargetFrameworkIdentifier) == 'MonoAndroid'" />
  <Import Project="iOS.targets"
          Condition="$(TargetFrameworkIdentifier) == 'Xamarin.iOS'" />
  <Import Project="iOSManifests.targets"
          Condition="$(TargetFrameworkIdentifier) == 'Xamarin.iOS'" />
  <Import Project="Mac.targets"
          Condition="$(TargetFrameworkIdentifier) == 'Xamarin.Mac'" />
  <Import Project="UAP.targets"
          Condition="$(TargetFrameworkIdentifier) == 'UAP'" />
  <Import Project="NetStandard.targets"
          Condition="$(TargetFrameworkIdentifier) == 'netstandard'" />

  <Import Project="BuildEnvironmentDump.targets" />
  <Import Project="ConfigurationManager.targets" />
  <Import Project="GitVersioning.targets" />
  <Import Project="ManifestsShared.targets" />
  <Import Project="ScssToCss.targets" />
  <Import Project="Secrets.targets" />

  <Target Name="MobileBuildToolsInit"
          DependsOn="_LocateBuildToolsConfig"
          BeforeTargets="CoreCompile;_CoreXamlG;XamlG;XamlC">

  </Target>

  <Target Name="_LocateBuildToolsConfig"
          BeforeTargets="CoreCompile">
    <LocateBuildToolsConfigTask ProjectDir=""
                                SolutionDir="">
      <Output ItemName="_LocatedSolutionDirectory"
              TaskParameter="LocatedSolutionDirectory" />
      <Output ItemName="_Configuration"
              TaskParameter="Configuration" />
    </LocateBuildToolsConfigTask>

    <PropertyGroup Condition=" $(SolutionDir) == '' ">
      <SolutionDir>@(_LocatedSolutionDirectory)</SolutionDir>
    </PropertyGroup>

    <PropertyGroup>
      <BuildToolsConfigurationPath>@(Configuration)</BuildToolsConfigurationPath>
    </PropertyGroup>
  </Target>


</Project>
